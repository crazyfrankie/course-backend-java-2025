<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-cn" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon.png" type="image/png">

<title>MyBatis数据持久化 | Java 后端开发教程</title>
<meta name="description" content="MyBatis ORM框架使用">
<meta property="og:url" content="https://example.org/docs/lesson09/lesson9/">
  <meta property="og:site_name" content="Java 后端开发教程">
  <meta property="og:title" content="MyBatis数据持久化">
  <meta property="og:description" content="MyBatis ORM框架使用">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">

  <meta itemprop="name" content="MyBatis数据持久化">
  <meta itemprop="description" content="MyBatis ORM框架使用">
  <meta itemprop="wordCount" content="1460">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="MyBatis数据持久化">
  <meta name="twitter:description" content="MyBatis ORM框架使用">
<link rel="preload" href="/scss/main.min.3f835885ea81cb77be25e3a893e756f58683dc910b66bff506ccdefbea43b4ab.css" as="style" integrity="sha256-P4NYheqBy3e&#43;JeOok&#43;dW9YaD3JELZr/1Bsze&#43;&#43;pDtKs=" crossorigin="anonymous">
<link href="/scss/main.min.3f835885ea81cb77be25e3a893e756f58683dc910b66bff506ccdefbea43b4ab.css" rel="stylesheet" integrity="sha256-P4NYheqBy3e&#43;JeOok&#43;dW9YaD3JELZr/1Bsze&#43;&#43;pDtKs=" crossorigin="anonymous">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><image href="/favicon.ico" width="32" height="32"/></svg></span><span class="navbar-brand__name">Java 后端开发教程</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/"><span>课程首页</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/docs/"><span>课程文档</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/CrazyForCode/course-backend-go-2025" target="_blank" rel="noopener"><span>GitHub</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">课程文档</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson01javae8afade8a880e59fbae7a180-li">
  <a href="/docs/lesson01/java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" title="Java语言基础" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson01javae8afade8a880e59fbae7a180"><span class="">第1课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson01e7acace4b880e88a82e8afbee8afade8a880e59fbae7a180-li">
  <a href="/docs/lesson01/%E7%AC%AC%E4%B8%80%E8%8A%82%E8%AF%BE%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" title="Java语言基础" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson01e7acace4b880e88a82e8afbee8afade8a880e59fbae7a180"><span class="">第1课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson02e7acace4ba8ce8afbejavae99da2e59091e5afb9e8b1a1e59fbae7a180-li">
  <a href="/docs/lesson02/%E7%AC%AC%E4%BA%8C%E8%AF%BEjava%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80/" title="面向对象基础" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson02e7acace4ba8ce8afbejavae99da2e59091e5afb9e8b1a1e59fbae7a180"><span class="">第2课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson02e99da2e59091e5afb9e8b1a1e59fbae7a180-li">
  <a href="/docs/lesson02/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80/" title="面向对象基础" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson02e99da2e59091e5afb9e8b1a1e59fbae7a180"><span class="">第2课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson03e7acace4b889e8afbejavae99da2e59091e5afb9e8b1a1e8bf9be998b6-li">
  <a href="/docs/lesson03/%E7%AC%AC%E4%B8%89%E8%AF%BEjava%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BF%9B%E9%98%B6/" title="面向对象进阶" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson03e7acace4b889e8afbejavae99da2e59091e5afb9e8b1a1e8bf9be998b6"><span class="">第3课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson04readme-li">
  <a href="/docs/lesson04/readme/" title="集合框架与异常处理" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson04readme"><span class="">第4课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson05readme-li">
  <a href="/docs/lesson05/readme/" title="多线程与IO操作" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson05readme"><span class="">第5课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson06readme-li">
  <a href="/docs/lesson06/readme/" title="数据库操作" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson06readme"><span class="">第6课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson07document-li">
  <a href="/docs/lesson07/document/" title="Spring框架基础" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson07document"><span class="">第7课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson08readme-li">
  <a href="/docs/lesson08/readme/" title="Spring Boot实战" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson08readme"><span class="">第8课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docslesson09lesson9-li">
  <a href="/docs/lesson09/lesson9/" title="MyBatis数据持久化" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-docslesson09lesson9"><span class="td-sidebar-nav-active-item">第9课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson10readme-li">
  <a href="/docs/lesson10/readme/" title="企业级项目实战" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson10readme"><span class="">第10课</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslesson07readme-li">
  <a href="/docs/lesson07/readme/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docslesson07readme"><span class=""></span></a>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/CrazyForCode/course-backend-go-2025/tree/main/content/docs/lesson09/lesson9.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> 查看页面源码</a>
  <a href="https://github.com/CrazyForCode/course-backend-go-2025/edit/main/content/docs/lesson09/lesson9.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> 编辑此页</a>
  <a href="https://github.com/CrazyForCode/course-backend-go-2025/new/main/content/docs/lesson09?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> 添加子页面</a>
  <a href="https://github.com/CrazyForCode/course-backend-go-2025/issues/new?title=MyBatis%e6%95%b0%e6%8d%ae%e6%8c%81%e4%b9%85%e5%8c%96" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> 提交文档问题</a>
  
</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#11mybatis是什么">1.1MyBatis是什么</a></li>
    <li><a href="#12mybatis的框架设计">1.2MyBatis的框架设计</a>
      <ul>
        <li><a href="#121接口层和数据库交互的方式">1.2.1接口层&mdash;和数据库交互的方式</a></li>
        <li><a href="#122数据处理层">1.2.2数据处理层</a></li>
        <li><a href="#123-框架支撑层">1.2.3. 框架支撑层</a></li>
        <li><a href="#124-引导层">1.2.4 引导层</a></li>
      </ul>
    </li>
    <li><a href="#13mybatis的主要构件及其相互关系">1.3MyBatis的主要构件及其相互关系</a></li>
    <li><a href="#14mybatis的入门程序">1.4MyBatis的入门程序</a>
      <ul>
        <li><a href="#141先准备数据库">1.4.1先准备数据库</a></li>
        <li><a href="#142加入mysql驱动依赖">1.4.2加入mysql驱动依赖</a></li>
        <li><a href="#143编写mybatis核心配置文件mybatisconfigxml">1.4.3编写mybatis核心配置文件：mybatisConfig.xml</a></li>
        <li><a href="#144编写mapper文件和映射的对象类文件">1.4.4编写mapper文件和映射的对象类文件</a></li>
        <li><a href="#145编写mapperxml文件">1.4.5编写mapper.xml文件</a></li>
        <li><a href="#146编写mybatis程序代码">1.4.6编写mybatis程序代码</a></li>
        <li><a href="#147查看结果">1.4.7查看结果</a></li>
      </ul>
    </li>
    <li><a href="#15源码分析举例">1.5源码分析举例</a></li>
  </ul>

  <ul>
    <li><a href="#21前置知识">2.1前置知识</a></li>
    <li><a href="#22springboot是什么">2.2springboot是什么</a></li>
    <li><a href="#23springboot的三层架构">2.3springboot的三层架构</a>
      <ul>
        <li><a href="#231三层架构是什么">2.3.1三层架构是什么</a></li>
        <li><a href="#232代码拆分">2.3.2代码拆分</a></li>
      </ul>
    </li>
    <li><a href="#24-注解开发">2.4 注解开发</a>
      <ul>
        <li><a href="#241springbootapplication注解">2.4.1SpringbootApplication注解</a></li>
        <li><a href="#242servicecontrolermapper注解">2.4.2@Service，@Controler，@Mapper注解</a></li>
        <li><a href="#243autowired注解实现自动装配">2.4.3@Autowired注解实现自动装配</a></li>
      </ul>
    </li>
    <li><a href="#25数据访问与持久化">2.5数据访问与持久化</a>
      <ul>
        <li><a href="#251spring-data-jpa">2.5.1Spring Data JPA</a></li>
        <li><a href="#252数据库连接与配置">2.5.2数据库连接与配置</a></li>
        <li><a href="#253事务管理">2.5.3事务管理</a></li>
      </ul>
    </li>
    <li><a href="#26spring-boot的安全机制">2.6Spring Boot的安全机制</a>
      <ul>
        <li><a href="#261导入依赖">2.6.1导入依赖</a></li>
        <li><a href="#262进行配置">2.6.2进行配置</a></li>
        <li><a href="#263定义接口进行访问">2.6.3定义接口进行访问</a></li>
        <li><a href="#264结果">2.6.4结果</a></li>
      </ul>
    </li>
    <li><a href="#27spring-boot的监控与管理">2.7Spring Boot的监控与管理</a>
      <ul>
        <li><a href="#271spring-boot-actuator">2.7.1Spring Boot Actuator</a></li>
        <li><a href="#272健康检查与指标监控">2.7.2健康检查与指标监控</a></li>
        <li><a href="#273自定义监控端点">2.7.3自定义监控端点</a></li>
      </ul>
    </li>
    <li><a href="#28spring-boot的测试">2.8Spring Boot的测试</a>
      <ul>
        <li><a href="#281单元测试与集成测试">2.8.1单元测试与集成测试</a></li>
        <li><a href="#282mock与测试数据">2.8.2Mock与测试数据</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            

          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/">课程文档</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    第9课</li>
  </ol>
</nav>
<div class="td-content">
	<h1>MyBatis数据持久化</h1>
	<div class="lead">MyBatis ORM框架使用</div>
	<header class="article-meta">
		
</header>
	<h1 id="1mybatis">1.MyBatis</h1>
<h2 id="11mybatis是什么">1.1MyBatis是什么</h2>
<p>MyBatis 是一款流行的 Java 持久层框架，它提供了一种优雅的方式来将数据库操作和 SQL 语句与 Java 代码分离。MyBatis 的核心思想是通过 XML 或注解方式将 SQL 语句映射到 Java 方法上，从而实现了数据的持久化。</p>
<h2 id="12mybatis的框架设计">1.2MyBatis的框架设计</h2>
<p><img src="https://lanshanteam.feishu.cn/space/api/box/stream/download/asynccode/?code=ODhlNmRmMjMzZDc0ZjM0MzM3MTEwNTUyNDA3Njc4MzhfYXlKeUlHSEZwanJXNVNsRzZNcHNvdmR6YkZESnRzYnpfVG9rZW46VWNXMGIzWWJQb2I5VXJ4SlBsZGNGd2h0bkxjXzE3NDE0MDk4Mjk6MTc0MTQxMzQyOV9WNA" alt="img"></p>
<h3 id="121接口层和数据库交互的方式">1.2.1接口层&mdash;和数据库交互的方式</h3>
<p>MyBatis和数据库的交互有两种方式：</p>
<blockquote>
<p>a.使用传统的MyBatis提供的API；</p>
<p><em>b. 使用Mapper接口</em></p></blockquote>
<h4 id="1211使用传统的mybatis提供的api">1.2.1.1使用传统的MyBatis提供的API</h4>
<blockquote>
<p>传统的方法是传递<strong>Statement Id</strong> 和查询参数给 <strong>SqlSession</strong> 对象，使用 <strong>SqlSession</strong>对象完成和数据库的交互；<strong>MyBatis</strong> 提供了非常方便和简单的API，供用户实现对数据库的增删改查数据操作，以及对数据库连接信息和<strong>MyBatis</strong> 自身配置信息的维护操作。</p></blockquote>
<p><img src="https://lanshanteam.feishu.cn/space/api/box/stream/download/asynccode/?code=MTExZjkyZDM2ODQwOWJhZjI2MmM1ODU4NWI2MzA5NzFfbW5HZHV1QzUzTXkxUEV6RHJ1Rk85cjVTd2Q5c05YN0RfVG9rZW46SFdGNmJScGdUb2dVR1h4eFJWUGNSQ29Tbm5jXzE3NDE0MDk4Mjk6MTc0MTQxMzQyOV9WNA" alt="img"></p>
<blockquote>
<p>上述使用<strong>MyBatis</strong> 的方法，是创建一个和数据库打交道的<strong>SqlSession</strong>对象，然后根据<strong>Statement Id</strong> 以及参数来操作数据库，这种方式虽然很简单和实用，但是它不符合面向对象语言的概念和面向接口编程的编程习惯。由于面向接口的编程是面向对象的大趋势，<strong>MyBatis</strong> 为了适应这一趋势，增加了第二种使用<strong>MyBatis</strong> 支持接口（<strong>Interface</strong>）调用的方式。</p></blockquote>
<h4 id="1212-使用mapper接口">1.2.1.2 使用Mapper接口</h4>
<blockquote>
<p><strong>MyBatis</strong> 将配置文件中的每一个<mapper> 节点抽象为一个 <strong>Mapper</strong> 接口，而这个接口中声明的方法和跟<mapper> 节点中的&lt;select|update|delete|insert&gt; 节点项对应，即&lt;select|update|delete|insert&gt; 节点的id值为<strong>Mapper</strong> 接口中的方法名称，parameterType 值表示<strong>Mapper</strong> 对应方法的入参类型，而resultMap 值则对应了<strong>Mapper</strong> 接口表示的返回值类型或者返回结果集的元素类型。</p></blockquote>
<p><img src="https://lanshanteam.feishu.cn/space/api/box/stream/download/asynccode/?code=NjUzNzFiNDcxNGU1MmRkZTZkZTg1MGZiYmFiN2Q1NjRfVldUM1AzTlA3ZUJLNWZFaVhEa2xpVzIwT0UxZ1ZjOUNfVG9rZW46Qm1FRGIwalZib3ZHRlh4ZndCMmNXakY4bkcxXzE3NDE0MDk4Mjk6MTc0MTQxMzQyOV9WNA" alt="img"></p>
<p>根据<strong>MyBatis</strong> 的配置规范配置好后，通过SqlSession.getMapper(XXXMapper.class) 方法，<strong>MyBatis</strong> 会根据相应的接口声明的方法信息，通过动态代理机制生成一个<strong>Mapper</strong> 实例，我们使用<strong>Mapper</strong> 接口的某一个方法时，<strong>MyBatis</strong> 会根据这个方法的方法名和参数类型，确定<strong>Statement Id</strong>，底层还是通过SqlSession.select(&ldquo;statementId&rdquo;,parameterObject);或者SqlSession.update(&ldquo;statementId&rdquo;,parameterObject); 等等来实现对数据库的操作，<strong>MyBatis</strong> 引用<strong>Mapper</strong> 接口这种调用方式，是为了满足面向接口编程的需要。（其实还有一个原因是在于，面向接口的编程，使得用户在接口上可以使用注解来配置SQL语句，这样就可以脱离XML配置文件，实现“0配置”）。</p>
<h3 id="122数据处理层">1.2.2数据处理层</h3>
<p>数据处理层可以说是<strong>MyBatis</strong> 的核心，从大的方面上讲，它要完成三个功能：</p>
<blockquote>
<p>a. 通过传入参数构建动态SQL语句；</p>
<p><em>b. SQL语句的执行以及</em></p>
<p><em>c. 封装查询结果集为List<E></em></p></blockquote>
<h4 id="1221参数映射和动态sql语句生成">1.2.2.1.参数映射和动态SQL语句生成</h4>
<blockquote>
<p>动态语句生成可以说是MyBatis框架非常优雅的一个设计，<strong>MyBatis</strong> 通过传入的参数值，使用 <strong>Ognl</strong> 来动态地构造SQL语句，使得<strong>MyBatis</strong> 有很强的灵活性和扩展性。</p>
<p>参数映射指的是对于<strong>java</strong> 数据类型和<strong>jdbc</strong>数据类型之间的转换：这里有包括两个过程：查询阶段，我们要将java类型的数据，转换成<strong>jdbc</strong>类型的数据，通过 preparedStatement.setXXX() 来设值；另一个就是对<strong>resultset</strong>查询结果集的<strong>jdbcType</strong> 数据转换成<strong>java</strong> 数据类型。</p></blockquote>
<h4 id="1222-sql语句的执行以及封装查询结果集为list">1.2.2.2. SQL语句的执行以及封装查询结果集为List<E></h4>
<p>动态SQL语句生成之后，<strong>MyBatis</strong> 将执行SQL语句，并将可能返回的结果集转换成<strong>List<E></strong> 列表。<strong>MyBatis</strong> 在对结果集的处理中，支持结果集关系一对多和多对一的转换，并且有两种支持方式，一种为嵌套查询语句的查询，还有一种是嵌套结果集的查询。</p>
<h3 id="123-框架支撑层">1.2.3. 框架支撑层</h3>
<h4 id="1231事务管理机制">1.2.3.1事务管理机制</h4>
<blockquote>
<p>事务管理机制对于<strong>ORM</strong>框架而言是不可缺少的一部分，事务管理机制的质量也是考量一个<strong>ORM</strong>框架是否优秀的一个标准.</p></blockquote>
<h4 id="1232连接池管理机制">1.2.3.2连接池管理机制</h4>
<blockquote>
<p>由于创建一个数据库连接所占用的资源比较大， 对于数据吞吐量大和访问量非常大的应用而言，连接池的设计就显得非常重要.</p></blockquote>
<h4 id="1233缓存机制">1.2.3.3缓存机制</h4>
<blockquote>
<p>为了提高数据利用率和减小服务器和数据库的压力，<strong>MyBatis</strong> 会对于一些查询提供会话级别的数据缓存，会将对某一次查询，放置到<strong>SqlSession</strong> 中，在允许的时间间隔内，对于完全相同的查询，<strong>MyBatis</strong> 会直接将缓存结果返回给用户，而不用再到数据库中查找.</p></blockquote>
<h4 id="1234sql语句的配置方式">1.2.3.4SQL语句的配置方式</h4>
<blockquote>
<p>传统的<strong>MyBatis</strong> 配置<strong>SQL</strong> 语句方式就是使用XML文件进行配置的，但是这种方式不能很好地支持面向接口编程的理念，为了支持面向接口的编程，<strong>MyBatis</strong> 引入了<strong>Mapper</strong>接口的概念，面向接口的引入，对使用注解来配置<strong>SQL</strong> 语句成为可能，用户只需要在接口上添加必要的注解即可，不用再去配置<strong>XML</strong>文件了，但是，目前的<strong>MyBatis</strong> 只是对注解配置<strong>SQL</strong> 语句提供了有限的支持，某些高级功能还是要依赖<strong>XML</strong>配置文件配置<strong>SQL</strong> 语句。</p></blockquote>
<h3 id="124-引导层">1.2.4 引导层</h3>
<blockquote>
<p>引导层是配置和启动<strong>MyBatis</strong> 配置信息的方式。<strong>MyBatis</strong> 提供两种方式来引导<strong>MyBatis</strong> ：基于XML配置文件的方式和基于<strong>Java API</strong> 的方式。</p></blockquote>
<h2 id="13mybatis的主要构件及其相互关系">1.3MyBatis的主要构件及其相互关系</h2>
<p>从MyBatis代码实现的角度来看，MyBatis的主要的核心部件有以下几个：</p>
<blockquote>
<ul>
<li><strong>SqlSession</strong> 作为MyBatis工作的主要顶层API，表示和数据库交互的会话，完成必要数据库增删改查功能</li>
<li><strong>Executor</strong> MyBatis执行器，是MyBatis 调度的核心，负责SQL语句的生成和查询缓存的维护</li>
<li><strong>StatementHandler</strong> 具体操作数据库相关的handler接口</li>
<li><strong>ParameterHandler</strong> 负责对用户传递的参数转换成JDBC Statement 所需要的参数，</li>
<li><strong>ResultSetHandler</strong> 具体操作数据库返回结果的handler接口</li>
<li><strong>MappedStatement</strong> MappedStatement维护了一条&lt;select|update|delete|insert&gt;节点的封装，</li>
<li><strong>SqlSource</strong> 负责根据用户传递的parameterObject，动态地生成SQL语句，将信息封装到BoundSql对象中，并返回</li>
<li><strong>BoundSql</strong> 表示动态生成的SQL语句以及相应的参数信息</li>
<li><strong>Configuration</strong> 管理mysqlConfig.xml全局配置关系类</li>
</ul></blockquote>
<h2 id="14mybatis的入门程序">1.4MyBatis的入门程序</h2>
<h3 id="141先准备数据库">1.4.1先准备数据库</h3>
<p><img src="https://lanshanteam.feishu.cn/space/api/box/stream/download/asynccode/?code=YmZlYzQ4YjI5ZTQ5ZjQ5NWJjNjVjNzA1Yzk5OWM2NzJfZTg4Vkt4djdkdDk5NXNZRDM3Z3lhTXNSQlZHWm5FTnFfVG9rZW46SW9BdWJEZXk0b2VmaFJ4Y05kTGM4Z1ZnbkVkXzE3NDE0MDk4Mjk6MTc0MTQxMzQyOV9WNA" alt="img"></p>
<h3 id="142加入mysql驱动依赖">1.4.2加入mysql驱动依赖</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#0550ae">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;groupId&gt;</span>mysql<span style="color:#0550ae">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;artifactId&gt;</span>mysql-connector-java<span style="color:#0550ae">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;version&gt;</span>8.0.29<span style="color:#0550ae">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0550ae">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;groupId&gt;</span>org.mybatis.spring.boot<span style="color:#0550ae">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span style="color:#0550ae">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;version&gt;</span>3.0.3<span style="color:#0550ae">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0550ae">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;groupId&gt;</span>org.projectlombok<span style="color:#0550ae">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;artifactId&gt;</span>lombok<span style="color:#0550ae">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;version&gt;</span>1.18.32<span style="color:#0550ae">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0550ae">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="143编写mybatis核心配置文件mybatisconfigxml">1.4.3编写mybatis核心配置文件：mybatisConfig.xml</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#57606a">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#57606a">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#57606a">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#57606a">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;environments</span> <span style="color:#1f2328">default=</span><span style="color:#0a3069">&#34;development&#34;</span><span style="color:#0550ae">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0550ae">&lt;environment</span> <span style="color:#1f2328">id=</span><span style="color:#0a3069">&#34;development&#34;</span><span style="color:#0550ae">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;transactionManager</span> <span style="color:#1f2328">type=</span><span style="color:#0a3069">&#34;JDBC&#34;</span><span style="color:#0550ae">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;dataSource</span> <span style="color:#1f2328">type=</span><span style="color:#0a3069">&#34;POOLED&#34;</span><span style="color:#0550ae">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#0550ae">&lt;property</span> <span style="color:#1f2328">name=</span><span style="color:#0a3069">&#34;driver&#34;</span> <span style="color:#1f2328">value=</span><span style="color:#0a3069">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="color:#0550ae">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#0550ae">&lt;property</span> <span style="color:#1f2328">name=</span><span style="color:#0a3069">&#34;url&#34;</span> <span style="color:#1f2328">value=</span><span style="color:#0a3069">&#34;jdbc:mysql://localhost:3306/students&#34;</span><span style="color:#0550ae">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#0550ae">&lt;property</span> <span style="color:#1f2328">name=</span><span style="color:#0a3069">&#34;username&#34;</span> <span style="color:#1f2328">value=</span><span style="color:#0a3069">&#34;root&#34;</span><span style="color:#0550ae">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#0550ae">&lt;property</span> <span style="color:#1f2328">name=</span><span style="color:#0a3069">&#34;password&#34;</span> <span style="color:#1f2328">value=</span><span style="color:#0a3069">&#34;123123&#34;</span><span style="color:#0550ae">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0550ae">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0550ae">&lt;mapper</span> <span style="color:#1f2328">resource=</span><span style="color:#0a3069">&#34;mapper/studentMapper.xml&#34;</span><span style="color:#0550ae">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="144编写mapper文件和映射的对象类文件">1.4.4编写mapper文件和映射的对象类文件</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@Mapper</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">interface</span> <span style="color:#1f2328">StudentMapper</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>List<span style="color:#0550ae">&lt;</span>Student<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#6639ba">queryAll</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@Data</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">Student</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>id<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>name<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>gender<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>age<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="145编写mapperxml文件">1.4.5编写mapper.xml文件</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#57606a">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a">&lt;!DOCTYPE mapper PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34; &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;mapper</span> <span style="color:#1f2328">namespace=</span><span style="color:#0a3069">&#34;com.example.lesson9.mapper.StudentMapper&#34;</span><span style="color:#0550ae">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;select</span> <span style="color:#1f2328">id=</span><span style="color:#0a3069">&#34;queryAll&#34;</span> <span style="color:#1f2328">resultType=</span><span style="color:#0a3069">&#34;com.example.lesson9.pojo.Student&#34;</span><span style="color:#0550ae">&gt;</span>
</span></span><span style="display:flex;"><span>        select id,name,gender,age from students.test
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="146编写mybatis程序代码">1.4.6编写mybatis程序代码</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#cf222e">package</span><span style="color:#fff"> </span><span style="color:#24292e">com.example.lesson9</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">com.example.mybatis.pojo.Student</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">org.apache.ibatis.io.Resources</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">org.apache.ibatis.session.SqlSession</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">org.apache.ibatis.session.SqlSessionFactory</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">org.apache.ibatis.session.SqlSessionFactoryBuilder</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">java.io.InputStream</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">java.util.HashMap</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">java.util.List</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">java.util.Map</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">mybatisTest</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">main</span><span style="color:#1f2328">(</span>String<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Exception<span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">         </span><span style="color:#57606a">/* 1.加载mybatis的配置文件，初始化mybatis，创建出SqlSessionFactory，是创建SqlSession的工厂
</span></span></span><span style="display:flex;"><span><span style="color:#57606a">          * 这里只是为了演示的需要，SqlSessionFactory临时创建出来，在实际的使用中，SqlSessionFactory只需要创建一次，当作单例来使用*/</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>InputStream<span style="color:#fff"> </span>inputStream<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>Resources<span style="color:#1f2328">.</span><span style="color:#1f2328">getResourceAsStream</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;mybatisConfig.xml&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>SqlSessionFactoryBuilder<span style="color:#fff"> </span>builder<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>SqlSessionFactoryBuilder<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>SqlSessionFactory<span style="color:#fff"> </span>factory<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>builder<span style="color:#1f2328">.</span><span style="color:#1f2328">build</span><span style="color:#1f2328">(</span>inputStream<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">//2. 从SqlSession工厂 SqlSessionFactory中创建一个SqlSession，进行数据库操作</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>SqlSession<span style="color:#fff"> </span>sqlSession<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>factory<span style="color:#1f2328">.</span><span style="color:#1f2328">openSession</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">//3.使用SqlSession查询list表</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>List<span style="color:#0550ae">&lt;</span>Student<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>sqlSession<span style="color:#1f2328">.</span><span style="color:#1f2328">selectList</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;queryAll&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span>result<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="147查看结果">1.4.7查看结果</h3>
<p><img src="https://lanshanteam.feishu.cn/space/api/box/stream/download/asynccode/?code=NTYxNjA0NmQxMGI2NWIxNDY0MTAzMzk3ZWE1YTA0OTlfMFFab3ZDZUlSY0VZM09NU0txQkVHVE1kbHVFZTRNbUZfVG9rZW46UXFJWGJ4OWlybzVTQzJ4eW1SVGNCclFabkVnXzE3NDE0MDk4Mjk6MTc0MTQxMzQyOV9WNA" alt="img"></p>
<h2 id="15源码分析举例">1.5源码分析举例</h2>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span>SqlSessionFactoryBuilder的build方法解析XML配置<span style="color:#f6f8fa;background-color:#82071e">，</span>创建SqlSessionFactory实例<span style="color:#f6f8fa;background-color:#82071e">。</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>SqlSessionFactory<span style="color:#fff"> </span><span style="color:#6639ba">build</span><span style="color:#1f2328">(</span>InputStream<span style="color:#fff"> </span>inputStream<span style="color:#1f2328">,</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>environment<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Properties<span style="color:#fff"> </span>properties<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>SqlSessionFactory<span style="color:#fff"> </span>var5<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#57606a">//通过传入的inputstream进行xml文件配置，并传入sqlsession工厂</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>XMLConfigBuilder<span style="color:#fff"> </span>parser<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>XMLConfigBuilder<span style="color:#1f2328">(</span>inputStream<span style="color:#1f2328">,</span><span style="color:#fff"> </span>environment<span style="color:#1f2328">,</span><span style="color:#fff"> </span>properties<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>var5<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">this</span><span style="color:#1f2328">.</span><span style="color:#1f2328">build</span><span style="color:#1f2328">(</span>parser<span style="color:#1f2328">.</span><span style="color:#1f2328">parse</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Exception<span style="color:#fff"> </span>var14<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span>ExceptionFactory<span style="color:#1f2328">.</span><span style="color:#1f2328">wrapException</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Error building SqlSession.&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>var14<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">finally</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>ErrorContext<span style="color:#1f2328">.</span><span style="color:#1f2328">instance</span><span style="color:#1f2328">().</span><span style="color:#1f2328">reset</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>inputStream<span style="color:#1f2328">.</span><span style="color:#1f2328">close</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>IOException<span style="color:#fff"> </span>var13<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>var5<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>builder方法的主要作用是从xml文件中读取数据并将其加载到内存中。</p>
<p>接下来，让我们再详细分析第三步操作，即通过 List<Student> result = sqlSession.selectList(&ldquo;queryAll&rdquo;); 这条语句来获取数据。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span>E<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>List<span style="color:#0550ae">&lt;</span>E<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#6639ba">selectList</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>statement<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span>parameter<span style="color:#1f2328">,</span><span style="color:#fff"> </span>RowBounds<span style="color:#fff"> </span>rowBounds<span style="color:#1f2328">,</span><span style="color:#fff"> </span>ResultHandler<span style="color:#fff"> </span>handler<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>List<span style="color:#fff"> </span>var6<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>MappedStatement<span style="color:#fff"> </span>ms<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">this</span><span style="color:#1f2328">.</span><span style="color:#1f2328">configuration</span><span style="color:#1f2328">.</span><span style="color:#1f2328">getMappedStatement</span><span style="color:#1f2328">(</span>statement<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">this</span><span style="color:#1f2328">.</span><span style="color:#1f2328">dirty</span><span style="color:#fff"> </span><span style="color:#0550ae">|=</span><span style="color:#fff"> </span>ms<span style="color:#1f2328">.</span><span style="color:#1f2328">isDirtySelect</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>var6<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">this</span><span style="color:#1f2328">.</span><span style="color:#1f2328">executor</span><span style="color:#1f2328">.</span><span style="color:#1f2328">query</span><span style="color:#1f2328">(</span>ms<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#cf222e">this</span><span style="color:#1f2328">.</span><span style="color:#1f2328">wrapCollection</span><span style="color:#1f2328">(</span>parameter<span style="color:#1f2328">),</span><span style="color:#fff"> </span>rowBounds<span style="color:#1f2328">,</span><span style="color:#fff"> </span>handler<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Exception<span style="color:#fff"> </span>var10<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span>ExceptionFactory<span style="color:#1f2328">.</span><span style="color:#1f2328">wrapException</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Error querying database.  Cause: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>var10<span style="color:#1f2328">,</span><span style="color:#fff"> </span>var10<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">finally</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>ErrorContext<span style="color:#1f2328">.</span><span style="color:#1f2328">instance</span><span style="color:#1f2328">().</span><span style="color:#1f2328">reset</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>var6<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>这段代码的主要功能是通过 <code>this.configuration.getMappedStatement(statement)</code> 方法来获取我们编写的 mapper XML 对象，这样可以为后续的 SQL 拼写和其他操作提供必要的数据和配置信息。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span>E<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>List<span style="color:#0550ae">&lt;</span>E<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#6639ba">query</span><span style="color:#1f2328">(</span>MappedStatement<span style="color:#fff"> </span>ms<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span>parameter<span style="color:#1f2328">,</span><span style="color:#fff"> </span>RowBounds<span style="color:#fff"> </span>rowBounds<span style="color:#1f2328">,</span><span style="color:#fff"> </span>ResultHandler<span style="color:#fff"> </span>resultHandler<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>SQLException<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>BoundSql<span style="color:#fff"> </span>boundSql<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>ms<span style="color:#1f2328">.</span><span style="color:#1f2328">getBoundSql</span><span style="color:#1f2328">(</span>parameter<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>CacheKey<span style="color:#fff"> </span>key<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">this</span><span style="color:#1f2328">.</span><span style="color:#1f2328">createCacheKey</span><span style="color:#1f2328">(</span>ms<span style="color:#1f2328">,</span><span style="color:#fff"> </span>parameter<span style="color:#1f2328">,</span><span style="color:#fff"> </span>rowBounds<span style="color:#1f2328">,</span><span style="color:#fff"> </span>boundSql<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">this</span><span style="color:#1f2328">.</span><span style="color:#1f2328">query</span><span style="color:#1f2328">(</span>ms<span style="color:#1f2328">,</span><span style="color:#fff"> </span>parameter<span style="color:#1f2328">,</span><span style="color:#fff"> </span>rowBounds<span style="color:#1f2328">,</span><span style="color:#fff"> </span>resultHandler<span style="color:#1f2328">,</span><span style="color:#fff"> </span>key<span style="color:#1f2328">,</span><span style="color:#fff"> </span>boundSql<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>query方法被反复调用，其中包含了this.creatCatheKey方法，这个方法非常强大，建议课下深入理解其实现原理，它展示了MyBatis的一级缓存机制，大概的内容是在执行sql之前，MyBatis会检查缓存中是否存在这个数据，如果存在，则直接返回缓存中的数据，如果没有，则会执行sql查询，并将结果再次存入缓存中，这就提升了效率，避免下次查询时再次访问数据库，从而有效减轻了数据库的负载压力。</p>
<h1 id="2springboot">2.springboot</h1>
<h2 id="21前置知识">2.1前置知识</h2>
<p>springmvc框架：拦截所有请求，并处理请求，分发给相应的处理器，覆盖表述层，实现表述层的简化</p>
<p>restful api的设计规范：一些请求方式（如get，delete，put，post）以及状态码（200表示客户端请求成功，404表示资源不存在，500表示服务器发生不可预期的错误等）</p>
<h2 id="22springboot是什么">2.2springboot是什么</h2>
<p>Spring Boot是一个基于Spring框架的项目，旨在简化Spring应用的初始搭建以及开发过程。<a href="https://springdoc.cn/spring-boot/">Spring Boot 中文文档</a>提供了全面的入门指南和参考信息.</p>
<h2 id="23springboot的三层架构">2.3springboot的三层架构</h2>
<h3 id="231三层架构是什么">2.3.1三层架构是什么</h3>
<p>把各个功能模块划分为表述层，业务逻辑层，和数据访问层三层架构，各层之间采用接口相互访问，并通过对象模型的实体类（pojo）作为数据传递的载体，不同的对象模型实体类一般对应数据库的不同表。而springboot实现的方式依次是controller层，service层和dao(mapper)层。</p>
<p>在我们进行程序设计程序开发时，尽可能让每一个接口、类、方法的职责更单一些（单一职责原则）。</p>
<blockquote>
<p>单一职责原则：一个类或一个方法，就只做一件事情，只管一块功能。</p>
<p>这样就可以让类、接口、方法的复杂度更低，可读性更强，扩展性更好，也更好利用后期的维护。</p></blockquote>
<p>在我们项目开发中呢，可以将代码分为三层：</p>
<p><img src="https://lanshanteam.feishu.cn/space/api/box/stream/download/asynccode/?code=ODc5MzI1YTljYTgwOTZhNzRmMGNjZmZhN2ZlNDhjYzNfQVpGNDA1MEo0S1VTbDhwUURsc2hsV2RpNzZUOUNXNmNfVG9rZW46SWlZN2JyZXFWbzBvOTN4ZVRYR2M5YXdLbm5oXzE3NDE0MDk4Mjk6MTc0MTQxMzQyOV9WNA" alt="img"></p>
<ul>
<li>数据访问：负责业务数据的维护操作，包括增、删、改、查等操作。</li>
<li>逻辑处理：负责业务逻辑处理的代码。</li>
<li>请求处理、响应数据：负责，接收页面的请求，给页面响应数据。</li>
</ul>
<p><img src="https://lanshanteam.feishu.cn/space/api/box/stream/download/asynccode/?code=MzE3YTZlMjc1YzNkMWQzMmFjZDU4MjE2ZjBiZWE4YWJfQThVY285OUlWc0NkWm5uQU9mQkpxNUNrSlo0V1NibXNfVG9rZW46RENSYWJONmJab3lrOVJ4c3l1SWMySGdObjRjXzE3NDE0MDk4Mjk6MTc0MTQxMzQyOV9WNA" alt="img"></p>
<p>前端发起的请求，由Controller层接收（Controller响应数据给前端）</p>
<p>Controller层调用Service层来进行逻辑处理（Service层处理完后，把处理结果返回给Controller层）</p>
<p>Serivce层调用Dao层（逻辑处理过程中需要用到的一些数据要从Dao层获取）</p>
<p>Dao层操作文件中的数据（Dao拿到的数据会返回给Service层）</p>
<h3 id="232代码拆分">2.3.2代码拆分</h3>
<p>我们使用三层架构思想，来简单操作一下，项目结构如下：</p>
<p><img src="https://lanshanteam.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDhjYTdjMjExY2RiOWQ3ODhkMTZkOTk0NGI2YmVlYmVfajI2M1JMYjk5RG9WdHpISWs0VXQzZks2d0owVXJRalhfVG9rZW46WFV2QmJ6ZE1IbzIyQmF4aUdlTGMwdWVmbjRlXzE3NDE0MDk4Mjk6MTc0MTQxMzQyOV9WNA" alt="img"></p>
<p>导入依赖：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#0550ae">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;groupId&gt;</span>org.mybatis.spring.boot<span style="color:#0550ae">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span style="color:#0550ae">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;version&gt;</span>3.0.3<span style="color:#0550ae">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;groupId&gt;</span>org.projectlombok<span style="color:#0550ae">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;artifactId&gt;</span>lombok<span style="color:#0550ae">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;version&gt;</span>1.18.32<span style="color:#0550ae">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;groupId&gt;</span>mysql<span style="color:#0550ae">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;artifactId&gt;</span>mysql-connector-java<span style="color:#0550ae">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;version&gt;</span>8.0.29<span style="color:#0550ae">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>**控制层：**接收前端发送的请求，对请求进行处理，并响应数据</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@RestController</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@RequestMapping</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/user&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">StudentController</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Autowired</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>StudentService<span style="color:#fff"> </span>studentService<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@GetMapping</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/list&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>List<span style="color:#0550ae">&lt;</span>Student<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#6639ba">getUser</span><span style="color:#1f2328">(){</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>List<span style="color:#0550ae">&lt;</span>Student<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>students<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>studentService<span style="color:#1f2328">.</span><span style="color:#1f2328">queryAll</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>students<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">      
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>**业务逻辑层：**处理具体的业务逻辑</p>
<ul>
<li>业务接口</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">interface</span> <span style="color:#1f2328">StudentService</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>List<span style="color:#0550ae">&lt;</span>Student<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#6639ba">queryAll</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>业务实现类</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@Service</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">StudentServiceImp</span><span style="color:#fff"> </span><span style="color:#cf222e">implements</span><span style="color:#fff"> </span>StudentService<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Autowired</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>StudentMapper<span style="color:#fff"> </span>studentMapper<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>List<span style="color:#0550ae">&lt;</span>Student<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#6639ba">queryAll</span><span style="color:#1f2328">(){</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>studentMapper<span style="color:#1f2328">.</span><span style="color:#1f2328">queryAll</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>**数据访问层：**负责数据的访问操作，包含数据的增、删、改、查</p>
<p>数据访问接口实现</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@Mapper</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">interface</span> <span style="color:#1f2328">StudentMapper</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Select</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;select id,name,gender,age from students.test&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>List<span style="color:#0550ae">&lt;</span>Student<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#6639ba">queryAll</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>实体pojo层</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@Data</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">Student</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>id<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>name<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>gender<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>age<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>配置yml文件</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-YAML" data-lang="YAML"><span style="display:flex;"><span><span style="color:#0550ae">spring</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">datasource</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">driver-class-name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>com.mysql.cj.jdbc.Driver<span style="color:#fff"> </span><span style="color:#57606a">#?????</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">url</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>jdbc:mysql://localhost:3306/students?useSSL=FALSE&amp;serverTimezone=UTC<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">username</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>root<span style="color:#fff"> </span><span style="color:#57606a">#??</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">password</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0550ae">123123</span><span style="color:#fff"> </span><span style="color:#57606a">#??</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="24-注解开发">2.4 注解开发</h2>
<h3 id="241springbootapplication注解">2.4.1SpringbootApplication注解</h3>
<p>@SpringBootApplication注解是Spring Boot框架中的核心注解，它的主要作用是简化和加速Spring Boot应用程序的配置和启动过程。</p>
<p>具体而言，@SpringBootApplication注解起到以下几个主要作用：</p>
<ol>
<li>自动配置：@SpringBootApplication注解包含了@EnableAutoConfiguration注解，用于启用Spring Boot的自动配置机制。自动配置会根据应用程序的依赖项和类路径，自动配置各种常见的Spring配置和功能，减少开发者的手动配置工作。它通过智能地分析类路径、加载配置和条件判断，为应用程序提供适当的默认配置。</li>
<li>组件扫描：@SpringBootApplication注解包含了@ComponentScan注解，用于自动扫描并加载应用程序中的组件，例如控制器（Controllers）、服务（Services）、存储库（Repositories）等。它默认会扫描@SpringBootApplication注解所在类的包及其子包中的组件，并将它们纳入Spring Boot应用程序的上下文中，使它们可被自动注入和使用。</li>
<li>声明配置类：@SpringBootApplication注解本身就是一个组合注解，它包含了@Configuration注解，将被标注的类声明为配置类。配置类可以包含Spring框架相关的配置、Bean定义，以及其他的自定义配置。通过@SpringBootApplication注解，开发者可以将配置类与启动类合并在一起，使得配置和启动可以同时发生。</li>
</ol>
<p>总的来说，@SpringBootApplication注解的主要作用是简化Spring Boot应用程序的配置和启动过程。它自动配置应用程序、扫描并加载组件，并将配置和启动类合二为一，简化了开发者的工作量，提高了开发效率。</p>
<h3 id="242servicecontrolermapper注解">2.4.2@Service，@Controler，@Mapper注解</h3>
<p>在Spring Boot中，使用<code>@Service``@Controller</code>注解的类会被自动扫描并注册为Spring容器的Bean，因此可以被其他组件通过依赖注入的方式使用。</p>
<p><code>@Controller</code>用于标记控制层组件，控制层负责处理用户的HTTP请求，并返回响应。通常，控制层会调用服务层的方法来处理业务逻辑，并将结果返回给用户，而且Spring MVC会识别带有<code>@RequestMapping</code>系列注解的方法，并将其映射为处理特定HTTP请求的方法。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@Controller</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@RequestMapping</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/student&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">StudentController</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Autowired</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>StudentService<span style="color:#fff"> </span>studentService<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@GetMapping</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/list&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>List<span style="color:#0550ae">&lt;</span>Student<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#6639ba">getUser</span><span style="color:#1f2328">(){</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>List<span style="color:#0550ae">&lt;</span>Student<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>students<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>studentService<span style="color:#1f2328">.</span><span style="color:#1f2328">queryAll</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>students<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>@Mapper</code>注解通常用于标记数据访问层的组件，特别是在使用MyBatis时，用于定义与数据库交互的Mapper接口。这个注解不是Spring Boot官方提供的，而是MyBatis提供的，用于指定哪些接口应该被MyBatis处理，并生成相应的代理实现。</p>
<h3 id="243autowired注解实现自动装配">2.4.3@Autowired注解实现自动装配</h3>
<ol>
<li>@Autowired工作流程</li>
</ol>
<ul>
<li>首先根据所需要的组件类型到 IOC 容器中查找
<ul>
<li>能够找到唯一的 bean：直接执行装配</li>
<li>如果完全找不到匹配这个类型的 bean：装配失败</li>
<li>和所需类型匹配的 bean 不止一个
<ul>
<li>加入@Qualifier(value = &ldquo;bean的名称&rdquo;)后</li>
<li>没有 @Qualifier 注解：根据 @Autowired 标记位置成员变量的变量名作为 bean 的 id 进行匹配
<ul>
<li>能够找到：执行装配</li>
<li>找不到：装配失败</li>
</ul>
</li>
<li>使用 @Qualifier 注解：根据 @Qualifier 注解中指定的名称作为 bean 的id进行匹配
<ul>
<li>能够找到：执行装配</li>
<li>找不到：装配失败</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="25数据访问与持久化">2.5数据访问与持久化</h2>
<h3 id="251spring-data-jpa">2.5.1Spring Data JPA</h3>
<p>Spring Boot与Spring Data JPA无缝集成，使得数据访问层的开发变得更加简单和高效。以下是一个基本的JPA实体和仓库（Repository）定义：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@Entity</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">User</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Id</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@GeneratedValue</span><span style="color:#1f2328">(</span>strategy<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>GenerationType<span style="color:#1f2328">.</span><span style="color:#1f2328">IDENTITY</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>Long<span style="color:#fff"> </span>id<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>name<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>email<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// getters and setters</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">interface</span> <span style="color:#1f2328">UserRepository</span><span style="color:#fff"> </span><span style="color:#cf222e">extends</span><span style="color:#fff"> </span>JpaRepository<span style="color:#0550ae">&lt;</span>User<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Long<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>在服务类中可以直接注入<code>UserRepository</code>并使用：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@Service</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">UserServiceImp</span><span style="color:#fff"> </span><span style="color:#cf222e">implements</span><span style="color:#fff"> </span>UserService<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Autowired</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>UserRepository<span style="color:#fff"> </span>userRepository<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>List<span style="color:#0550ae">&lt;</span>User<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#6639ba">findAll</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>userRepository<span style="color:#1f2328">.</span><span style="color:#1f2328">findAll</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>User<span style="color:#fff"> </span><span style="color:#6639ba">save</span><span style="color:#1f2328">(</span>User<span style="color:#fff"> </span>user<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>userRepository<span style="color:#1f2328">.</span><span style="color:#1f2328">save</span><span style="color:#1f2328">(</span>user<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>User<span style="color:#fff"> </span><span style="color:#6639ba">findById</span><span style="color:#1f2328">(</span>Long<span style="color:#fff"> </span>id<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>userRepository<span style="color:#1f2328">.</span><span style="color:#1f2328">findById</span><span style="color:#1f2328">(</span>id<span style="color:#1f2328">).</span><span style="color:#1f2328">orElse</span><span style="color:#1f2328">(</span><span style="color:#cf222e">null</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>User<span style="color:#fff"> </span><span style="color:#6639ba">update</span><span style="color:#1f2328">(</span>Long<span style="color:#fff"> </span>id<span style="color:#1f2328">,</span><span style="color:#fff"> </span>User<span style="color:#fff"> </span>userDetails<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>User<span style="color:#fff"> </span>user<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>userRepository<span style="color:#1f2328">.</span><span style="color:#1f2328">findById</span><span style="color:#1f2328">(</span>id<span style="color:#1f2328">).</span><span style="color:#1f2328">orElseThrow</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>user<span style="color:#1f2328">.</span><span style="color:#1f2328">setName</span><span style="color:#1f2328">(</span>userDetails<span style="color:#1f2328">.</span><span style="color:#1f2328">getName</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>user<span style="color:#1f2328">.</span><span style="color:#1f2328">setEmail</span><span style="color:#1f2328">(</span>userDetails<span style="color:#1f2328">.</span><span style="color:#1f2328">getEmail</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>userRepository<span style="color:#1f2328">.</span><span style="color:#1f2328">save</span><span style="color:#1f2328">(</span>user<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">delete</span><span style="color:#1f2328">(</span>Long<span style="color:#fff"> </span>id<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>userRepository<span style="color:#1f2328">.</span><span style="color:#1f2328">deleteById</span><span style="color:#1f2328">(</span>id<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="252数据库连接与配置">2.5.2数据库连接与配置</h3>
<p>Spring Boot通过自动配置简化了数据库连接的配置。在<code>application.properties</code>或<code>application.yml</code>文件中配置数据库连接信息即可,这是以<code>application.properties</code>举的例子</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Properties" data-lang="Properties"><span style="display:flex;"><span><span style="color:#1f2328">spring.datasource.url</span><span style="color:#0550ae">=</span><span style="color:#0a3069">jdbc:mysql://localhost:3306/students</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">spring.datasource.username</span><span style="color:#0550ae">=</span><span style="color:#0a3069">root</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">spring.datasource.password</span><span style="color:#0550ae">=</span><span style="color:#0a3069">123123</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">spring.datasource.driver-class-name</span><span style="color:#0550ae">=</span><span style="color:#0a3069">com.mysql.cj.jdbc.Driver</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="253事务管理">2.5.3事务管理</h3>
<p>Spring Boot支持声明式事务管理，可以通过<code>@Transactional</code>注解轻松实现事务控制。例如：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@Transactional</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>User<span style="color:#fff"> </span><span style="color:#6639ba">update</span><span style="color:#1f2328">(</span>Long<span style="color:#fff"> </span>id<span style="color:#1f2328">,</span><span style="color:#fff"> </span>User<span style="color:#fff"> </span>userDetails<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>User<span style="color:#fff"> </span>user<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>userRepository<span style="color:#1f2328">.</span><span style="color:#1f2328">findById</span><span style="color:#1f2328">(</span>id<span style="color:#1f2328">).</span><span style="color:#1f2328">orElseThrow</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>user<span style="color:#1f2328">.</span><span style="color:#1f2328">setName</span><span style="color:#1f2328">(</span>userDetails<span style="color:#1f2328">.</span><span style="color:#1f2328">getName</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>user<span style="color:#1f2328">.</span><span style="color:#1f2328">setEmail</span><span style="color:#1f2328">(</span>userDetails<span style="color:#1f2328">.</span><span style="color:#1f2328">getEmail</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>userRepository<span style="color:#1f2328">.</span><span style="color:#1f2328">save</span><span style="color:#1f2328">(</span>user<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="26spring-boot的安全机制">2.6Spring Boot的安全机制</h2>
<p>在springboot项目中，可以整合springsecurity，可以实现以下功能：</p>
<ol>
<li><strong>简化配置</strong>：Spring Boot 通过自动配置机制简化了 Spring Security 的集成，使得开发者可以轻松地添加安全依赖并启用基本的安全设置。</li>
<li><strong>灵活的访问控制</strong>：Spring Security 提供了细粒度的访问控制，允许开发者根据具体需求定义复杂的访问规则，例如通过 <code>SecurityFilterChain</code> 来定义访问规则。</li>
<li><strong>身份验证和授权</strong>：Spring Security 提供了强大的身份验证和授权功能，支持多种认证机制，如表单登录、HTTP基本认证、OAuth2等，以及基于角色和权限的访问控制。</li>
<li><strong>防御常见安全漏洞</strong>：Spring Security 帮助开发者防范SQL注入、跨站脚本攻击（XSS）等常见网络攻击，提高了应用的安全性。</li>
<li><strong>内容安全策略（CSP）</strong>：Spring Security 支持配置内容安全策略，进一步增强了应用的防护能力。</li>
<li><strong>高度可定制</strong>：Spring Security 是一个高度可定制的安全框架，它主要提供了身份认证和授权功能，允许开发者定义哪些URL需要认证，哪些用户有权访问某些资源等。</li>
<li><strong>减少重复代码</strong>：Spring Security 提供了一组可以在Spring应用上下文中配置的Bean，充分利用了Spring IoC、DI和AOP功能，为应用系统提供声明式的安全访问控制功能，减少了为企业系统安全控制编写大量重复代码的工作。</li>
</ol>
<h3 id="261导入依赖">2.6.1导入依赖</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#0550ae">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#0550ae">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0550ae">&lt;artifactId&gt;</span>spring-boot-starter-security<span style="color:#0550ae">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0550ae">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="262进行配置">2.6.2进行配置</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@Configuration</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">SecurityConfig</span><span style="color:#fff">  </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Bean</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>InMemoryUserDetailsManager<span style="color:#fff"> </span><span style="color:#6639ba">userDetailsService</span><span style="color:#1f2328">(</span>PasswordEncoder<span style="color:#fff"> </span>passwordEncoder<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>InMemoryUserDetailsManager<span style="color:#fff"> </span>manager<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>InMemoryUserDetailsManager<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>manager<span style="color:#1f2328">.</span><span style="color:#1f2328">createUser</span><span style="color:#1f2328">(</span>User<span style="color:#1f2328">.</span><span style="color:#1f2328">withUsername</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;user&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">.</span><span style="color:#1f2328">password</span><span style="color:#1f2328">(</span>passwordEncoder<span style="color:#1f2328">.</span><span style="color:#1f2328">encode</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;123123&#34;</span><span style="color:#1f2328">)).</span><span style="color:#1f2328">roles</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;USER&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">   </span><span style="color:#57606a">//定义user用户和密码</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">.</span><span style="color:#1f2328">build</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>manager<span style="color:#1f2328">.</span><span style="color:#1f2328">createUser</span><span style="color:#1f2328">(</span>User<span style="color:#1f2328">.</span><span style="color:#1f2328">withUsername</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;admin&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">.</span><span style="color:#1f2328">password</span><span style="color:#1f2328">(</span>passwordEncoder<span style="color:#1f2328">.</span><span style="color:#1f2328">encode</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;123123&#34;</span><span style="color:#1f2328">)).</span><span style="color:#1f2328">roles</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;USER&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;ADMIN&#34;</span><span style="color:#1f2328">)</span><span style="color:#57606a">//定义admin用户和密码</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">.</span><span style="color:#1f2328">build</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>manager<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Bean</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>PasswordEncoder<span style="color:#fff"> </span><span style="color:#6639ba">passwordEncoder</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>BCryptPasswordEncoder<span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 使用BCryptPasswordEncoder进行密码加密</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// 配置安全过滤链</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Bean</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>SecurityFilterChain<span style="color:#fff"> </span><span style="color:#6639ba">filterChain</span><span style="color:#1f2328">(</span>HttpSecurity<span style="color:#fff"> </span>http<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Exception<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>http<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">.</span><span style="color:#1f2328">authorizeHttpRequests</span><span style="color:#1f2328">(</span>authorize<span style="color:#fff"> </span><span style="color:#0550ae">-&gt;</span><span style="color:#fff"> </span>authorize<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">requestMatchers</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/admin/&#34;</span><span style="color:#1f2328">).</span><span style="color:#1f2328">hasRole</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;ADMIN&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#57606a">// 只有ADMIN角色可以访问/admin路径</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">**</span><span style="color:#fff">                        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">requestMatchers</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/user/**&#34;</span><span style="color:#1f2328">).</span><span style="color:#1f2328">hasAnyRole</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;ADMIN&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;USER&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#57606a">// USER和ADMIN角色都可以访问/user路径</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">requestMatchers</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/&#34;</span><span style="color:#1f2328">).</span><span style="color:#1f2328">permitAll</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#57606a">// 允许所有用户访问根路径</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">.</span><span style="color:#1f2328">formLogin</span><span style="color:#1f2328">(</span>withDefaults<span style="color:#1f2328">())</span><span style="color:#fff"> </span><span style="color:#57606a">// 启用表单登录</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">.</span><span style="color:#1f2328">logout</span><span style="color:#1f2328">(</span>withDefaults<span style="color:#1f2328">());</span><span style="color:#fff"> </span><span style="color:#57606a">// 启用注销功能</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>http<span style="color:#1f2328">.</span><span style="color:#1f2328">build</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>使得admin用户可以访问&quot;/admin/**&ldquo;和&rdquo;/user/<em>&ldquo;的接口，而user用户只能访问&quot;user/</em>&ldquo;的接口</p>
<h3 id="263定义接口进行访问">2.6.3定义接口进行访问</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@RestController</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">UserController</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#57606a">//    @Autowired</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#57606a">//    private UserService userService;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@GetMapping</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/admin/test&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">adminEndpoint</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;Admin!&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@GetMapping</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/user/test&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">userEndpoint</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;User!&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="264结果">2.6.4结果</h3>
<p>登陆user用户访问admin/test接口，结果就是不能访问</p>
<p><img src="https://lanshanteam.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTg4NmRlNTIyZThlZGU3ZGU4ZjQ4NzcxNDQyNGJiZWNfMHo1VFh2dXNjUjhrNGpGbDlmTlpCTlZGelNLOTZnNFRfVG9rZW46VjZqM2JoMU1pb1AyU0t4Tkt3TGMxWlBmbm1jXzE3NDE0MDk4Mjk6MTc0MTQxMzQyOV9WNA" alt="img"></p>
<p>但user可以访问user/test接口</p>
<p><img src="https://lanshanteam.feishu.cn/space/api/box/stream/download/asynccode/?code=MDk5NTM1ZWRiMmUxMWRlZWY2MGRhYjQwNzA4ZmY1YzJfMlpJRGhzeXVZOTBibTRsYkdXRGNSRzJtbVhrcml1M3BfVG9rZW46Q1dYQmI0QXM1b3JGMVR4Ymc3TGM4UTlpbmRoXzE3NDE0MDk4Mjk6MTc0MTQxMzQyOV9WNA" alt="img"></p>
<p>登陆admin用户，可以访问admin/test接口</p>
<p><img src="https://lanshanteam.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjkxYzRmYWY2MzhmMWMxMTY1YTNiNmQ4MTFiZWNlN2NfamJJSU5oVE5hejlkRTFHQ1pzVTM0akxRZ1R1aERoa05fVG9rZW46RWw4UGJ6RFc5b0JYSzN4MHB0NGNTVk9obmNjXzE3NDE0MDk4Mjk6MTc0MTQxMzQyOV9WNA" alt="img"></p>
<h2 id="27spring-boot的监控与管理">2.7Spring Boot的监控与管理</h2>
<h3 id="271spring-boot-actuator">2.7.1Spring Boot Actuator</h3>
<p>Spring Boot Actuator提供了一系列用于监控和管理Spring Boot应用的端点。这些端点可以用于查看应用的健康状况、环境信息、度量指标等。可以通过引入spring-boot-starter-actuator依赖来启用Actuator功能：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#0550ae">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#0550ae">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&lt;artifactId&gt;</span>spring-boot-starter-actuator<span style="color:#0550ae">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在<code>application.yml</code>文件中配置Actuator端点的访问权限：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-YAML" data-lang="YAML"><span style="display:flex;"><span><span style="color:#0550ae">management</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">endpoint</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">web</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span><span style="color:#0550ae">exposure:include</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>health=*<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">health</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">show-details</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>always<span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="272健康检查与指标监控">2.7.2健康检查与指标监控</h3>
<p>Actuator提供了一个<code>/health</code>端点，用于检查应用的健康状况。可以通过实现<code>HealthIndicator</code>接口来自定义健康检查。例如：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">CustomHealthIndicator</span><span style="color:#fff"> </span><span style="color:#cf222e">implements</span><span style="color:#fff"> </span>HealthIndicator<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Override</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Health<span style="color:#fff"> </span><span style="color:#6639ba">health</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span>healthy<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>checkSomeService<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>healthy<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>Health<span style="color:#1f2328">.</span><span style="color:#1f2328">up</span><span style="color:#1f2328">().</span><span style="color:#1f2328">withDetail</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;service&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;available&#34;</span><span style="color:#1f2328">).</span><span style="color:#1f2328">build</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">else</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>Health<span style="color:#1f2328">.</span><span style="color:#1f2328">down</span><span style="color:#1f2328">().</span><span style="color:#1f2328">withDetail</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;service&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;unavailable&#34;</span><span style="color:#1f2328">).</span><span style="color:#1f2328">build</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">checkSomeService</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 自定义健康检查逻辑</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="273自定义监控端点">2.7.3自定义监控端点</h3>
<p>可以通过实现<code>@Endpoint</code>注解来自定义Actuator端点。例如：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@Endpoint</span><span style="color:#1f2328">(</span>id<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;custom&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">CustomEndpoint</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@ReadOperation</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#6639ba">customEndpoint</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>details<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>details<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;custom&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;This is a custom endpoint&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>details<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="28spring-boot的测试">2.8Spring Boot的测试</h2>
<h3 id="281单元测试与集成测试">2.8.1单元测试与集成测试</h3>
<p>Spring Boot提供了强大的测试支持，可以通过引入<code>spring-boot-starter-test</code>依赖来启用测试功能。以下是一个简单的单元测试示例：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@SpringBootTest</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">StudentServiceTest</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Autowired</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>StudentService<span style="color:#fff"> </span>studentService<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Test</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">testFindALL1</span><span style="color:#1f2328">(){</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>List<span style="color:#0550ae">&lt;</span>Student<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>users<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>studentService<span style="color:#1f2328">.</span><span style="color:#1f2328">queryAll</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>assertNotNull<span style="color:#1f2328">(</span>users<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"> </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="282mock与测试数据">2.8.2Mock与测试数据</h3>
<p>可以使用<code>@MockBean</code>注解来创建Mock对象，并注入到测试上下文中。例如：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Java" data-lang="Java"><span style="display:flex;"><span><span style="color:#0550ae">@SpringBootTest</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">StudentServiceTest</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@MockBean</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>UserRepository<span style="color:#fff"> </span>userRepository<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Autowired</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>UserService<span style="color:#fff"> </span>userService<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Test</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">testFindAll</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>when<span style="color:#1f2328">(</span>userRepository<span style="color:#1f2328">.</span><span style="color:#1f2328">findAll</span><span style="color:#1f2328">()).</span><span style="color:#1f2328">thenReturn</span><span style="color:#1f2328">(</span>Collections<span style="color:#1f2328">.</span><span style="color:#1f2328">emptyList</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>List<span style="color:#0550ae">&lt;</span>User<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>users<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>userService<span style="color:#1f2328">.</span><span style="color:#1f2328">findAll</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>assertTrue<span style="color:#1f2328">(</span>users<span style="color:#1f2328">.</span><span style="color:#1f2328">isEmpty</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>到这里我们springboot的学习就告一段落了，相信你对springboot有了更深的理解，大家学完上面的内容看试着能不能在上面的项目中实现更多的方法，这是最基础的项目模型，可以去多深入看看能不能实现更多的方法</p>

	
</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/CrazyForCode/course-backend-go-2025" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/CrazyForCode/course-backend-go-2025" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.d230e5c0c462caf31486b65a51a409f76a8cf4c96cd6d4b7b71da22758e95574.js" integrity="sha256-0jDlwMRiyvMUhrZaUaQJ92qM9Mls1tS3tx2iJ1jpVXQ=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>